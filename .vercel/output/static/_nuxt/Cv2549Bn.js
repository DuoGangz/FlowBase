import{f as x,r as l,i as y,c as d,a as s,b as _,w as b,x as w,p as g,z as k,m as a,q as T,F as N,y as h,l as C,t as u,_ as O,o as i,d as V}from"#entry";const B={class:"p-6 space-y-4"},S={class:"flex items-center justify-between"},U={class:"border rounded-md p-4 space-y-3"},D={class:"flex items-end gap-3"},I=["value"],M=["disabled"],F=x({__name:"owner",setup(z){const r=l(),m=l([]),o=l(""),c=l("success");async function p(){const n=await $fetch("/api/users");m.value=n.filter(e=>e.role!=="OWNER")}async function f(){o.value="";try{await $fetch("/api/owner/transfer",{method:"POST",body:{targetUserId:r.value}}),o.value="Ownership transferred. Please re-login.",c.value="success"}catch(n){o.value=n?.data?.message||"Transfer failed",c.value="error"}}return y(p),(n,e)=>{const v=O;return i(),d("div",B,[s("div",S,[e[2]||(e[2]=s("h1",{class:"text-2xl font-semibold"},"Owner Tools",-1)),_(v,{to:"/",class:"underline"},{default:b(()=>[...e[1]||(e[1]=[V("Back",-1)])]),_:1})]),s("div",U,[e[4]||(e[4]=s("h2",{class:"font-medium"},"Transfer Ownership",-1)),e[5]||(e[5]=s("div",{class:"text-sm text-gray-600"},"Select a user to become the new owner. Your role will become ADMIN.",-1)),s("div",D,[s("div",null,[e[3]||(e[3]=s("label",{class:"block text-sm text-gray-600"},"Target User",-1)),g(s("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>T(r)?r.value=t:null),class:"border rounded px-2 py-1 min-w-64"},[(i(!0),d(N,null,h(a(m),t=>(i(),d("option",{key:t.id,value:t.id},u(t.name)+" ("+u(t.role)+")",9,I))),128))],512),[[k,a(r),void 0,{number:!0}]])]),s("button",{class:"px-3 py-2 border rounded",disabled:!a(r),onClick:f},"Transfer",8,M)]),a(o)?(i(),d("div",{key:0,class:C(["text-sm",a(c)==="success"?"text-green-700":"text-red-700"])},u(a(o)),3)):w("",!0)])])}}});export{F as default};
