import{f as y,r as l,i as w,c as r,a as s,p,v as f,m as u,q as m,s as _,F as b,y as g,o as c,b as h,w as j,d as k,t as B,_ as N}from"#entry";const V={class:"p-6 space-y-6"},D={class:"divide-y"},M=y({__name:"index",setup(F){const n=l([]),a=l(""),o=l("");async function d(){try{n.value=await $fetch("/api/projects")}catch{console.warn("Failed to load projects (DB not configured yet?)"),n.value=[]}}w(d);async function v(){if(!(!a.value||!o.value)){try{await $fetch("/api/projects",{method:"POST",body:{name:a.value,slug:o.value}})}catch{console.warn("Failed to create project (DB not configured yet?)")}a.value="",o.value="",await d()}}return(i,e)=>{const x=N;return c(),r("div",V,[e[3]||(e[3]=s("h1",{class:"text-2xl font-semibold"},"Projects",-1)),s("form",{class:"flex gap-2",onSubmit:_(v,["prevent"])},[p(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>m(a)?a.value=t:null),placeholder:"New project name",class:"border rounded px-3 py-2 w-64"},null,512),[[f,u(a)]]),p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>m(o)?o.value=t:null),placeholder:"slug",class:"border rounded px-3 py-2 w-48"},null,512),[[f,u(o)]]),e[2]||(e[2]=s("button",{class:"bg-black text-white px-4 py-2 rounded"},"Create",-1))],32),s("ul",D,[(c(!0),r(b,null,g(u(n),t=>(c(),r("li",{key:t.id,class:"py-2"},[h(x,{class:"text-blue-600 hover:underline",to:`/projects/${t.slug}`},{default:j(()=>[k(B(t.name),1)]),_:2},1032,["to"])]))),128))])])}}});export{M as default};
